<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/head :: head('Title')"/>
<body>
<nav th:replace="partials/navbar.html :: navbar"/>

<h1>Single Event Listing</h1>
<div>
    <p>Address: <span th:text="${openHouseEvent.house.address}" />, <span th:text="${openHouseEvent.house.city}" />, <span th:text="${openHouseEvent.house.state}" /> <span th:text="${openHouseEvent.house.zipcode}" /></p>
    <p>Start time: <span th:text="${openHouseEvent.dateStart}" /></p>
    <p>End time: <span th:text="${openHouseEvent.dateEnd}" /></p>
    <p>Listing agent: <span th:text="${openHouseEvent.house.user.firstName}"/> <span th:text="${openHouseEvent.house.user.lastName}" /></p>

    <div th:if="${isEventCreator}">
        <a th:href="@{/events/edit/{id}(id=${openHouseEvent.id})}" class="btn btn-primary">Edit</a>
        <a th:href="@{/events/delete/{id}(id=${openHouseEvent.id})}" class="btn btn-primary">Delete</a>

        <h3 th:if="${!applications.isEmpty()}">Applicants</h3>
        <div style="width: 30rem;" class="card" th:each="app : ${applications}">
            <div class="card-body">
                <p>Application date: <span th:text="${app.date}"/></p>
                <p>Applicant name: <span th:text="${app.user.firstName}"/> <span th:text="${app.user.lastName}"/></p>
                <p>Inquiry: <span th:text="${app.inquiry}"/></p>
                <form th:action="@{/events/apply/host/{eventId}/{userId} (eventId=${openHouseEvent.id}, userId=${app.user.id})}" method="post">
                    <input type="submit" value="Set host" class="btn btn-primary" />
                </form>
            </div>
        </div>
    </div>

    <a th:if="${!isEventCreator}" th:href="@{/events/apply/{id}(id=${openHouseEvent.id})}" class="btn btn-primary">Apply</a>


</div>

<footer th:replace="partials/footer.html :: footer"/>
<div th:replace="partials/scripts.html :: scripts"/>
</body>
</html>